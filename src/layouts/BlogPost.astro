---
import Layout from './Layout.astro'; // Importing your main layout to inherit scripts/styles
import type { CollectionEntry } from 'astro:content';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, heroImage } = Astro.props;
---

<Layout title={title}>
  
  <nav class="fixed top-0 left-0 right-0 z-40 flex justify-center pt-6 fade-in-down">
    <div class="bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-gray-200 dark:border-[#2a2a2a] px-6 py-3 rounded-full flex gap-6 items-center shadow-lg transition-colors duration-300">
      <a href="/" class="text-gray-500 dark:text-gray-400 font-medium hover:text-black dark:hover:text-white transition text-sm tracking-wide">HOME</a>
      <a href="/blog" class="text-gray-900 dark:text-white font-bold hover:text-indigo-500 transition text-sm tracking-wide">BLOG</a>
      <a href="/about" class="text-gray-500 dark:text-gray-400 font-medium hover:text-black dark:hover:text-white transition text-sm tracking-wide">ABOUT</a>
      
      <button id="themeToggle" class="ml-2 w-8 h-8 rounded-full bg-gray-100 dark:bg-[#333] flex items-center justify-center text-gray-600 dark:text-yellow-400 hover:scale-110 transition">
        <svg class="w-4 h-4 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
        <svg class="w-4 h-4 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
      </button>
    </div>
  </nav>

  <main class="max-w-[800px] mx-auto px-6 py-32">
    
    <article class="reveal">
        <div class="text-center mb-12">
            <div class="inline-block px-3 py-1 mb-6 text-xs font-mono text-indigo-500 border border-indigo-500/30 rounded-full uppercase tracking-widest">
                {pubDate.toLocaleDateString()}
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white leading-tight mb-6">{title}</h1>
            <p class="text-xl text-gray-600 dark:text-gray-400 italic leading-relaxed">{description}</p>
        </div>

        {heroImage && (
            <div class="rounded-[2rem] overflow-hidden mb-12 border border-gray-200 dark:border-[#2a2a2a] shadow-2xl">
                <img width={1020} height={510} src={heroImage} alt="" class="w-full object-cover" />
            </div>
        )}

        <div class="prose prose-lg dark:prose-invert prose-indigo mx-auto prose-headings:font-bold prose-a:text-indigo-500 hover:prose-a:text-indigo-400">
            <slot />
        </div>
    </article>

    <div class="mt-20 pt-10 border-t border-gray-200 dark:border-[#2a2a2a] text-center">
        <a href="/blog" class="inline-flex items-center gap-2 text-gray-500 hover:text-indigo-500 transition">
            ‚Üê Back to All Posts
        </a>
    </div>

  </main>

  <script is:inline>
    // Theme Logic for Blog Post
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");
      localStorage.setItem("theme", element.classList.contains("dark") ? "dark" : "light");
    }
    document.getElementById("themeToggle").addEventListener("click", handleToggleClick);
  </script>

</Layout>
