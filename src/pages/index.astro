<script is:inline>
    // Robust Theme Toggle
    document.addEventListener('astro:page-load', () => {
        const toggleBtn = document.getElementById("themeToggle");
        
        if(toggleBtn) {
            toggleBtn.addEventListener("click", () => { 
                const el = document.documentElement;
                
                // Toggle Class
                el.classList.toggle("dark");
                
                // Save Preference
                const newTheme = el.classList.contains("dark") ? "dark" : "light";
                localStorage.setItem("theme", newTheme);
            });
        }
        
        // Clock Logic
        setInterval(() => { 
            const c = document.getElementById('halifax-clock'); 
            if(c) c.textContent = new Intl.DateTimeFormat('en-US', { timeZone: 'America/Halifax', hour: 'numeric', minute: '2-digit', hour12: true }).format(new Date()); 
        }, 1000);
        
        // Spotlight Logic
        const cards = document.querySelectorAll('.spotlight-card');
        document.addEventListener('mousemove', (e) => {
          for (const card of cards) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            card.style.setProperty('--mouse-x', `${x}px`);
            card.style.setProperty('--mouse-y', `${y}px`);
          }
        });
    });
  </script>
